webpackJsonp([7],{"155O":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mvHQ"),s=n.n(i),a={name:"scanfs",data:function(){return{allFiles:"",mp3file:[],cancleLoadings:!1,phoneGUrl:"",isShowMp3:!1,audioIndex:0,playMp3Title:""}},mounted:function(){this.isApp&&(this.phoneGUrl=this.commonFn.rootDirectory()),this.getMp3File()},methods:{scanAllMp3:function(){var t=this;if(this.isApp){var e=api.require("fs");this.fileAll(e,""),api.setKeepScreenOn({keepOn:!0}),this.commonFn.showLoading("正在扫描...");var n=0,i=!1,s=setInterval(function(){t.cancleLoadings==i?n=++n:(n=0,i=t.cancleLoadings),16==n&&(t.commonFn.hideLoading(),t.commonFn.showMsg({text:"扫描完成！"}),clearInterval(s),api.setKeepScreenOn({keepOn:!1}))},500)}},fileAll:function(t,e){var n=this,i=this.mp3file?this.mp3file:[];t.readDir({path:n.phoneGUrl+e},function(s,a){if(s.status)if(n.cancleLoadings=!1,s.data&&$api.isArray(s.data))for(var l=0;l<s.data.length;l++)n.regCancle(s.data[l])||function(i){setTimeout(function(){n.fileAll(t,e?e+"/"+s.data[i]:s.data[i])},1800)}(l);else n.regMp3(s.data)&&(0==i.length?i[0]=s.data:i.push(s.data),n.mp3file=i);else n.regMp3(n.phoneGUrl+e)&&(0==i.length?i[0]=n.phoneGUrl+e:i.push(n.phoneGUrl+e),n.mp3file=i),n.cancleLoadings=!0})},saveMp3:function(){for(var t=this,e=t.mp3file,n=[],i=0;i<e.length;i++){var a=e[i].split("/"),l={title:a[a.length-1].split(".mp3")[0],url:e[i],singer:"",duration:"",releaseDate:"",like:!1};n[i]=l}this.commonFn.openFiles({filePath:"pingData/phoneAllMp3.txt"}).then(function(e){e.status?t.commonFn.writeFiles({filePath:"pingData/phoneAllMp3.txt",data:s()(n),overwrite:!0}).then(function(e){e.status&&t.commonFn.showMsg({text:"保存成功！"})}):t.commonFn.createFile({filePath:"pingData/phoneAllMp3.txt"}).then(function(e){e.status&&t.commonFn.writeFiles({filePath:"pingData/phoneAllMp3.txt",data:s()(n),overwrite:!0}).then(function(e){e.status&&t.commonFn.showMsg({text:"保存成功！"})})})})},regMp3:function(t){return RegExp(/\.mp3$/).test(t)},regCancle:function(t){return RegExp(/Android$|gifshow$|alipay$|backup$|backups$|DCIM$/).test(t)},getMp3File:function(){var t=this;if(!this.isApp)return!1;this.commonFn.readFiles({filePath:"pingData/phoneAllMp3.txt"}).then(function(e){e.status&&(t.mp3file=JSON.parse(e.data))})},showBrowser:function(){var t=this;if(this.isApp){var e=api.require("fileBrowser");e.open(function(n){n&&(t.commonFn.getAttrFile({cancelPath:!0,filePath:n.url}).then(function(t){alert(s()(t))}),e.close())})}},scanAttrMp3:function(){if(!this.isApp)return!1;var t=api.require("fs");this.getFileAttr(t,0,this.mp3file)},getFileAttr:function(t,e,n){var i=this;t.getAttribute({path:n[e]},function(a,l){if(a.status){var o=n,r={};r.fileurl=n[e],r.fileInfo=a,o[e]=r,i.mp3file=o,e+1<o.length?i.getFileAttr(t,++e,o):(i.allMp3File=o,i.strMp3File=s()(o))}else alert(s()(l))})}}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"scanfs"},[e("div",{staticClass:"scanfsNav"},[e("ul",{staticClass:"list2"},[e("li",[e("button",{staticClass:"litiBg",attrs:{type:"button"},on:{click:this.showBrowser}},[this._v("打开文件浏览")])]),this._v(" "),e("li",[e("button",{staticClass:"litiBg",attrs:{type:"button"},on:{click:this.scanAllMp3}},[this._v("扫描所有mp3文件")])]),this._v(" "),this._m(0)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("button",{staticClass:"litiBg",attrs:{type:"button"}},[this._v("扫描图片")])])}]};var o=n("VU/8")(a,l,!1,function(t){n("7h/O")},null,null);e.default=o.exports},"7h/O":function(t,e){},gMQi:function(t,e){},"w/Mu":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"test",data:function(){return{winH:window.innerHeight}},mounted:function(){},methods:{},computed:{}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"test",style:"height:"+this.winH+"px;"},[e("p",[this._v("暂无测试内容")])])},staticRenderFns:[]};var a=n("VU/8")(i,s,!1,function(t){n("gMQi")},null,null);e.default=a.exports}});