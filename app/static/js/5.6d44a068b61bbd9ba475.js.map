{"version":3,"sources":["webpack:///src/pages/others/drawingboard.vue","webpack:///./src/pages/others/drawingboard.vue?c288","webpack:///./src/pages/others/drawingboard.vue"],"names":["drawingboard","name","data","mounted","this","initDraw","methods","console","log","window","winWidth","winHeight","canW","canH","dpr","devicePixelRatio","isOut","canvas","document","getElementById","context","getContext","innerWidth","innerHeight","main_canvas","querySelector","style","cssText","width","height","start_point","x","y","end_point","isdraw","cancelBubble","e","evt","event","stopPropagation","onmousedown","pageX","left_W","pageY","onmousemove","re_drow","onmouseup","addEventListener","touches","clientX","clientY","cxline","sig_color","bgImg","Image","stx","sty","endx","endy","beginPath","restore","save","lineWidth","strokeStyle","moveTo","lineTo","stroke","drow_bg","sx","sy","ew","eh","drawImage","src","imgUrlData","file","files","undefined","createObjectURL","URL","webkitURL","onload","bg_ratio","bgH","bgW","target","value","clearRect","save_sig","create_imgs","create_imgbox","modal_bg","save_imgs","setAttribute","toDataURL","appendChild","children","removeChild","firstChild","others_drawingboard","render","$createElement","_self","_c","_m","staticRenderFns","_vm","_h","staticClass","attrs","id","_v","type","readonly","placeholder","accept","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.6d44a068b61bbd9ba475.js","sourcesContent":["<template>\r\n    <div class=\"drawingboard\">\r\n        <div class=\"main_box\">\r\n            <div class=\"main_canvas\">\r\n                <canvas id=\"mycanvas\"></canvas>\r\n            </div>\r\n            \r\n            <div class=\"signature_btn\">\r\n                <ul class=\"flexbox\">\r\n                    <li class=\"flex1\">\r\n                        <div class=\"sig_cxline\">\r\n                            <select name=\"\" id=\"sib_linecx\">\r\n                                <option value=\"1\">1</option>\r\n                                <option value=\"2\">2</option>\r\n                                <option value=\"3\">3</option>\r\n                                <option value=\"4\">4</option>\r\n                                <option value=\"5\">5</option>\r\n                            </select>\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"flex1\">\r\n                        <div class=\"sig_colors\">\r\n                            <input id=\"color_val\" type=\"color\" readonly placeholder=\"选择颜色\">\r\n                        </div>\r\n                    </li>\r\n                    <li class=\"flex1\">\r\n                        <div class=\"sig_bgfile\">\r\n                            <input id=\"upimgs\" type=\"file\" class=\"upfiles\" accept=\"image/*\">\r\n                            <button type=\"button\">上传背景</button>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n                \r\n            </div>\r\n            <div class=\"btnbox\">\r\n                <ul class=\"flexbox\">\r\n                    <li class=\"flex1\">\r\n                        <button id=\"sig_clear\" type=\"button\">清空画布</button>\r\n                    </li>\r\n                    <li class=\"flex1\">\r\n                        <button id=\"save_sig\" type=\"button\">生成图片</button>\r\n                    </li>\r\n                </ul>\r\n                \r\n            </div>\r\n            \r\n            <div class=\"create_imgs\">\r\n                <div class=\"modal_bg\"></div>\r\n                <div class=\"create_imgbox\"></div>\r\n            </div>\r\n            \r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name:'drawingboard',\r\n    data(){\r\n        return{\r\n\r\n        }\r\n    },\r\n    mounted(){\r\n        this.initDraw();\r\n    },\r\n    methods:{\r\n        initDraw(){\r\n            // 记录页面在顶部是，开始滑动的位置\r\n            var vueThis = this;\r\n            var startp={\r\n                x:0,\r\n                y:0\r\n            }\r\n            // 处理微信浏览器页面顶部下滑\r\n            // document.body.addEventListener('touchstart', function(e) {\r\n            //     startp.x = e.touches[0].clientX;\r\n            //     startp.y = e.touches[0].clientY;\r\n            // }, {passive: false})\r\n            // document.body.addEventListener('touchmove', function(e) {\r\n            //     var move_x = e.touches[0].clientX;\r\n            //     var move_y = e.touches[0].clientY;\r\n            //     if(($(window).scrollTop() <=1)&&(move_y-startp.y>0)){\r\n            //         e.preventDefault();\r\n            //     }\r\n            // }, {passive: false})\r\n            console.log(window);\r\n           \r\n            // var dpr = e.currentTarget.devicePixelRatio;//设备像素比\r\n            var dpr = window.devicePixelRatio;//设备像素比\r\n            var winWidth,winHeight,canW,canH,can_ratio,left_W;\r\n            var isMB = false;//是否为移动端\r\n            var isOut = false;//是否超出canvas\r\n            var canvas = document.getElementById('mycanvas');\r\n            var context = canvas.getContext(\"2d\");\r\n\r\n            winWidth = window.innerWidth;\r\n            winHeight = window.innerHeight;\r\n            var main_canvas = document.querySelector('.main_canvas');\r\n            \r\n            main_canvas.style.cssText=\"width:winWidth;height:winHeight*0.7\"\r\n            main_canvas\r\n            isMB = true;\r\n            canW = winWidth*dpr;\r\n            canH = winHeight*dpr*0.7;\r\n            canvas.width = canW;\r\n            canvas.height = canH;\r\n               \r\n            can_ratio = canvas.width/canvas.height;//canvas比例\r\n            \r\n            // 判断是否有滚动条\r\n            // function hasScrollbar() {\r\n            //     return document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight);\r\n            // }\r\n\r\n            // 画图起点位置\r\n            var start_point = {\r\n                x:0,\r\n                y:0\r\n            };\r\n            // 画图结束点位置\r\n            var end_point = {\r\n                x:0,\r\n                y:0\r\n            }\r\n\r\n            // PC端\r\n            var isdraw = false;\r\n            canvas.onmousedown = function(e){\r\n                start_point.x = e.pageX-left_W;\r\n                start_point.y = e.pageY;\r\n                isdraw = true;\r\n            }\r\n            canvas.onmousemove = function(e){\r\n                cancelBubble(e);\r\n                if(isOut){\r\n                    if(isdraw){\r\n                        start_point.x = e.pageX-left_W;\r\n                        start_point.y = e.pageY;\r\n                        end_point.x = e.pageX-left_W;\r\n                        end_point.y = e.pageY;\r\n                        re_drow(start_point.x,start_point.y,end_point.x,end_point.y);\r\n                    }\r\n                }else{\r\n                    if(isdraw){\r\n                        end_point.x = e.pageX-left_W;\r\n                        end_point.y = e.pageY;\r\n                        re_drow(start_point.x,start_point.y,end_point.x,end_point.y);\r\n                    }\r\n                }\r\n                isOut = false;\r\n            }\r\n            canvas.onmouseup =  function(e){\r\n                cancelBubble(e);\r\n                isdraw = false;\r\n                start_point.x = 0;\r\n                start_point.y = 0;\r\n                end_point.x = 0;\r\n                end_point.y = 0;\r\n            }\r\n            window.onmouseup =  function(){\r\n                isdraw = false;\r\n            }\r\n            window.onmousemove = function(e){\r\n                // 处理边缘问题\r\n                if((e.pageX>canvas.width+left_W)||(e.pageX<canvas.width+left_W)||(e.pageY<0)||(e.pageY>canvas.height)){\r\n                    isOut = true;\r\n                }\r\n            }\r\n            // 阻止冒泡事件\r\n            function cancelBubble(e) { \r\n                var evt = e ? e : window.event; \r\n                if (evt.stopPropagation) {        \r\n                    evt.stopPropagation(); \r\n                }else {   \r\n                    evt.cancelBubble = true; \r\n                }  \r\n            }\r\n\r\n            // 移动端\r\n            // 起始位置\r\n            canvas.addEventListener('touchstart',function(e){\r\n                start_point.x = e.touches[0].clientX*dpr;\r\n                start_point.y = e.touches[0].clientY*dpr;\r\n            },false);\r\n            // 结束位置\r\n            canvas.addEventListener('touchmove',function(e){\r\n                end_point.x = e.touches[0].clientX*dpr;\r\n                end_point.y = e.touches[0].clientY*dpr;\r\n                re_drow(start_point.x,start_point.y,end_point.x,end_point.y);\r\n            },false);\r\n\r\n            var cxline = 1;//默认线条粗细\r\n            if(isMB){\r\n                // 移动端放大\r\n                cxline = cxline*dpr;\r\n            }\r\n            var sig_color = 'black';//默认线条颜色\r\n            var bgImg = new Image();//创建背景图对象\r\n            bgImg.src = '';\r\n            \r\n            // 绘制线条\r\n            function re_drow(stx,sty,endx,endy){\r\n                context.beginPath();\r\n                context.restore();\r\n                context.save();\r\n                context.lineWidth = cxline;//边框宽度\r\n                context.strokeStyle = sig_color;\r\n                context.moveTo(stx,sty);\r\n                context.lineTo(endx,endy);\r\n                context.stroke();\r\n                start_point.x = endx;\r\n                start_point.y = endy;\r\n                context.restore();\r\n                context.save();\r\n            }\r\n\r\n            // 清空画布\r\n            function clearCanvas(){\r\n                context.beginPath();\r\n                context.clearRect(0,0,canvas.width,canvas.height);\r\n                context.restore();\r\n                context.save();\r\n            }\r\n            // 上传背景图\r\n            var upimgs = document.getElementById('upimgs');\r\n            upimgs.addEventListener('change',function(){\r\n                console.log('有选择');\r\n                var _this = this;\r\n                var file = this.files[0];\r\n                console.log(file);\r\n                \r\n                \r\n                var imgUrlData;\r\n                if (window.createObjectURL!=undefined) { \r\n                    imgUrlData=window.createObjectURL(file)\r\n                    console.log(window.createObjectURL(file));\r\n                } else if (window.URL!=undefined) { // mozilla(firefox) \r\n                    imgUrlData= window.URL.createObjectURL(file);\r\n                    console.log(window.URL.createObjectURL(file));\r\n                } else if (window.webkitURL!=undefined) { // webkit or chrome \r\n                    imgUrlData= window.webkitURL.createObjectURL(file);\r\n                    console.log(window.webkitURL.createObjectURL(file));\r\n                }  \r\n                \r\n                bgImg.src = imgUrlData;\r\n                bgImg.onload = function(){\r\n                    var bg_ratio = bgImg.width/bgImg.height;//背景图比例\r\n                    var bgimg_w = bgImg.width*dpr;\r\n                    var bgimg_h = bgImg.height*dpr;\r\n                    var qd_x = 0,qd_y = 0,bgw = 0,bgh = 0;\r\n\r\n                    // 以画布宽度为宽度，获取背景高度\r\n                    var bgH =  canvas.width/bg_ratio;\r\n                    //以画布高度为高度，获取背景宽度\r\n                    var bgW = canvas.height*bg_ratio;\r\n\r\n                    if(bgH>canvas.height){\r\n                        qd_x = 0;\r\n                        qd_y = -(bgH-canvas.height)/2;\r\n                        bgw = canvas.width;\r\n                        bgh = bgH;\r\n                        drow_bg(qd_x,qd_y,bgw,bgh);\r\n                    }else if(bgH<canvas.height){\r\n                        qd_x = -(bgW-canvas.width)/2;\r\n                        qd_y = 0;\r\n                        bgw = bgW;\r\n                        bgh = canvas.height;\r\n                        drow_bg(qd_x,qd_y,bgw,bgh);\r\n                    }\r\n                }\r\n                \r\n            })\r\n            // 画入背景\r\n            function drow_bg(sx,sy,ew,eh){\r\n                context.restore();\r\n                context.save();\r\n                context.beginPath();\r\n                context.drawImage(bgImg, sx, sy, ew, eh);\r\n                context.restore();\r\n                context.save();\r\n            }\r\n            // 颜色\r\n            var color_val = document.getElementById('color_val');\r\n            color_val.addEventListener('input',function(e){\r\n                sig_color = e.target.value;\r\n                console.log(e);\r\n            })\r\n            // 粗细\r\n            var sib_linecx = document.getElementById('sib_linecx');\r\n            sib_linecx.addEventListener('input',function(e){\r\n                cxline = e.target.value;\r\n                console.log(e);\r\n            })\r\n            // 清空画布\r\n            var sig_clear = document.getElementById('sig_clear');\r\n            sig_clear.addEventListener('click',function(){\r\n                clearCanvas();\r\n            })\r\n\r\n            // 保存图片\r\n            var save_sig = document.getElementById('save_sig');\r\n            var create_imgs = document.querySelector('.create_imgs');\r\n            var create_imgbox = document.querySelector('.create_imgbox');\r\n            var modal_bg = document.querySelector('.modal_bg');\r\n            save_sig.addEventListener('click',function(){\r\n                \r\n                var save_imgs = new Image();\r\n                save_imgs.setAttribute(\"crossOrigin\",'Anonymous');\r\n                save_imgs.src = canvas.toDataURL(\"image/png\");//转换图片格式\r\n                console.log(save_imgs);\r\n                save_imgs.style.cssText = 'width: 100%;display:block;';\r\n                save_imgs.onload = function(){\r\n                    create_imgbox.appendChild(save_imgs);\r\n                }\r\n                create_imgs.style.cssText ='display:block;';\r\n            })\r\n            modal_bg.addEventListener('click',function(){\r\n                create_imgs.style.cssText ='display:none;';\r\n                console.log(create_imgbox.children);\r\n                create_imgbox.removeChild(create_imgbox.firstChild);\r\n            })\r\n           \r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n    \r\n    .modal_bg{\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: rgba(0, 0, 0, 0.5);\r\n        z-index: 100;\r\n    }\r\n    .create_imgbox{\r\n        position: fixed;\r\n        top: 50%;\r\n        left: 10%;\r\n        transform: translateY(-50%);\r\n        width: 80%;\r\n        height: auto;\r\n        z-index: 101;\r\n        background-color: white;\r\n        border-radius: 6px;\r\n        overflow: hidden;\r\n    }\r\n    .create_imgbox img{\r\n        max-width: 100%;\r\n        display: block;\r\n    }\r\n    .create_imgs{\r\n        display: none;\r\n    }\r\n    .sig_bgfile{\r\n        position: relative;\r\n    }\r\n\r\n    .sig_cxline,\r\n    .sig_colors{\r\n        text-align: center;\r\n        \r\n    }\r\n    .sig_cxline select,\r\n    .sig_colors input,\r\n    .sig_bgfile button{\r\n        width: 80%;\r\n        padding: 0px 10px;\r\n        border: 1px solid rgb(205, 205, 205);\r\n        height: 34px;\r\n        line-height: 34px;\r\n        border-radius: 6px;\r\n    }\r\n    .sig_colors input{\r\n        background-color: white;\r\n    }\r\n    .sig_bgfile button{\r\n        background-color: skyblue;\r\n        border: none;\r\n    }\r\n    .btnbox{\r\n        margin-top: 10px;\r\n        text-align: center;\r\n    }\r\n    .btnbox button{\r\n        width: 80%;\r\n        height: 40px;\r\n        line-height: 40px;\r\n        border: none;\r\n        border-radius: 6px;\r\n        font-size: 16px;\r\n        color: white;\r\n    }\r\n    #sig_clear{\r\n        background-color: #ec1c21;\r\n    }\r\n    #save_sig{\r\n        background-color: #27bc3e;\r\n    }\r\n    .main_canvas{\r\n        position: relative;\r\n        /* overflow: hidden; */\r\n    }\r\n    .main_canvas canvas{\r\n        /* position: absolute; */\r\n        /* top: 0; */\r\n        /* left: 0; */\r\n        /* z-index: -10; */\r\n        width: 100% !important;\r\n    }\r\n    .main_canvas img{\r\n        max-width: 100%;\r\n    }\r\n    .signature_btn{\r\n        margin-top: 10px;\r\n    }\r\n\r\n    input.upfiles {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: transparent;\r\n        border: none;\r\n        color: none;\r\n        -webkit-appearance: none;\r\n        opacity: 0;\r\n    }\r\n    input.upfiles::-webkit-file-upload-button {\r\n        border: none;\r\n        background-color: transparent;\r\n        color: transparent;\r\n        outline: none;\r\n    }\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/others/drawingboard.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"drawingboard\"},[_c('div',{staticClass:\"main_box\"},[_c('div',{staticClass:\"main_canvas\"},[_c('canvas',{attrs:{\"id\":\"mycanvas\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"signature_btn\"},[_c('ul',{staticClass:\"flexbox\"},[_c('li',{staticClass:\"flex1\"},[_c('div',{staticClass:\"sig_cxline\"},[_c('select',{attrs:{\"name\":\"\",\"id\":\"sib_linecx\"}},[_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"1\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"2\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"3\"}},[_vm._v(\"3\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"4\"}},[_vm._v(\"4\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"5\"}},[_vm._v(\"5\")])])])]),_vm._v(\" \"),_c('li',{staticClass:\"flex1\"},[_c('div',{staticClass:\"sig_colors\"},[_c('input',{attrs:{\"id\":\"color_val\",\"type\":\"color\",\"readonly\":\"\",\"placeholder\":\"选择颜色\"}})])]),_vm._v(\" \"),_c('li',{staticClass:\"flex1\"},[_c('div',{staticClass:\"sig_bgfile\"},[_c('input',{staticClass:\"upfiles\",attrs:{\"id\":\"upimgs\",\"type\":\"file\",\"accept\":\"image/*\"}}),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\"}},[_vm._v(\"上传背景\")])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"btnbox\"},[_c('ul',{staticClass:\"flexbox\"},[_c('li',{staticClass:\"flex1\"},[_c('button',{attrs:{\"id\":\"sig_clear\",\"type\":\"button\"}},[_vm._v(\"清空画布\")])]),_vm._v(\" \"),_c('li',{staticClass:\"flex1\"},[_c('button',{attrs:{\"id\":\"save_sig\",\"type\":\"button\"}},[_vm._v(\"生成图片\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"create_imgs\"},[_c('div',{staticClass:\"modal_bg\"}),_vm._v(\" \"),_c('div',{staticClass:\"create_imgbox\"})])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3854811e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/others/drawingboard.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3854811e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./drawingboard.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./drawingboard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./drawingboard.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3854811e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./drawingboard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3854811e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/others/drawingboard.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}