webpackJsonp([25],{"+XBy":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADJUlEQVRoQ+2ZW4hNURjHf/8XReRBo4xyKU8kiVxK4kUuueTyMOVSSlOuD0SmFBFl4sEwalI0Q00KKYWQoUajeJkU8uD2IOFFcnn6tHJote299j63OWfHqt2pc9b6r/9vrb3Wt9Z3RM6Lcu6ffxPAzJYAzcAw4ICknlrNZNEzYGZrgIue4ceSpucCIMa8850PgATzDsC9QvvregYC5lskHamVeddv6hoImN8p6XgtzacCBMxvlXSq1uaDAAHzGyWdrQfziQAB802SuuvFfCyAmc0D7lbR5EfgE+A+bwM3JPWV2t9fi9jMrgArShUssd0z4DzQJulzMRpxAK3ArmJEKlj3aQHidFbNOIBxwDVgUlaRKtQ7I2lTFt3YOGBmEwvnnSjEIUn7sgjH1TGzQUAjMAqYDMwAlgIjY+r3SJqf1ldiIAtAtEranSac9XczGw/sKDzRZt2SmkJawUgcgHCLbXtWk1nqlXrWynKUSHqdOiS5O0HFipk1AK+BwRHRZkkdcR2lArhGgZnokrS+YgS/+hoB3ItsIolH9kwAKRDtkrZUGGIqcB8Y6unGzkJmgADEB0lxu0hZTGa2FzjsifRJmh0VLQogAeKCpLVluU1obGavgLHez42S3vnViwYoQIwG3C70rZq3MTPrAvzBWS3pUtkA1RjthMAXTSAclbQnTwAuWvd7hi9LWpUnALelumP379IvaUqeANzZ6Ydn2K25IXkCcCfjl57ht5LG5AnA7fsPPMO3JC3IE0A0mJ2UtC1PAG70/ei7UpK78v4pJQWygYgDZuZelZteX1+ABknf8wLQCazzzHZK2hAdvLqcATNbBlyNmF0s6XpeAN5H7smJB8a6moHCpf8OMCcy0rMkPYxbe3UDYGbLgfZC1sL3ul1SW9LGUXMAM3ORtaXwn1vUZ+qfJwMOYGYuJ+RyQzOBhcBcYHjMCG+WlJqhC+WFFgEu/+OSvQNZ3rjtU5K7E6eWEMALYEKqQmUrnAOOSXqSVTYE8AiYllWojHpfAbfznJDk0u1FlbRX6GCFIZzZ597TC/RKct+XVAZ8EZfkMtDoP0ClR7RYvZ9mrxBAh0JcMgAAAABJRU5ErkJggg=="},Bh7J:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n={name:"iframes_madmin",data:function(){return{iframHeight:"",iframeUrl:"",showUrl:null,linkList:[],searchList:[],searchSite:[],linkIndex:null,searchType:!1,curImgUrl:"",showIfrImg:!1,imgType:"",canvasStyle:{width:300,height:150},clipboardData:"",mediaData:{type:"",isShow:!1,url:"",progress:0}}},mounted:function(){var t=this;(this.iframHeight=window.innerHeight+"px",this.isApp)&&api.require("clipBoard").get(function(e,a){e?t.clipboardData=e.value:alert(s()(a))});this.getFiles({fileName:"searchfile.ping",cancelList:!1}),this.getFiles({fileName:"searchsite.ping",cancelList:!0})},methods:{jtbFn:function(t){var e=this;api.confirm({title:"剪切板",msg:t,buttons:["确定","取消"]},function(a,i){1==a.buttonIndex&&(e.showUrl=t)})},showIframe:function(){this.iframeUrl=this.showUrl;var t=this;setTimeout(function(){iframeBox.onload=function(){setTimeout(function(){var e=t.$refs.iframeBox;t.forTarget(e),t.addEventFn(e)},300)}},300)},iframeFn:function(t){var e=this;setTimeout(function(){var t=e.$refs.iframeBox;e.forTarget(t)},800)},addEventFn:function(t){var e=this,a=t.contentWindow.document.body;a.addEventListener("click",function(t){for(var a=0;a<t.path.length;a++)"A"==t.path[a].tagName&&e.iframeFn()}),a.addEventListener("dblclick",function(t){if("IMG"==t.target.tagName){e.imgFn(t);for(var a=0;a<t.path.length;a++)if("A"==t.path[a].tagName)return e.cancelBubble(t),!1}}),a.addEventListener("touchend",function(t){if("IMG"==t.target.tagName)for(var a=0;a<t.path.length;a++)if("A"==t.path[a].tagName)return e.imgFn(t),e.cancelBubble(t),!1;"VIDEO"==t.target.tagName&&(e.mediaData.type="mp4",e.mediaData.isShow=!0,t.target.src?e.mediaData.url=t.target.src:t.target.children.forEach(function(t,a,i){"video/mp4"==t.type&&(e.mediaData.url=t.src)}));"AUDIO"==t.target.tagName&&(e.mediaData.type="mp3",e.mediaData.isShow=!0,e.mediaData.url=t.target.src)})},imgFn:function(t){var e=t.target.src,a=new RegExp(/\.png$/),i=new RegExp(/\.jpg$/),s=new RegExp(/\.gif$/);a.test(e)||i.test(e)||s.test(e)||(this.imgType=t.target.src+".jpg"),this.curImgUrl=e,this.showIfrImg=!0,this.drawImgs(e)},cancelBubble:function(t){var e=t||window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},forTarget:function(t){var e=this,a=t.contentWindow.document.body.querySelectorAll("iframe");a.length>0&&a.forEach(function(t,a,i){var s=t.contentWindow.document.body.querySelectorAll("iframe");e.addEventFn(t),s.length>0&&e.forTarget(t)})},getElData:function(t){this.linkIndex=t.currentTarget.dataset.linkindex,this.showUrl=t.currentTarget.children[1].innerHTML},gobacks:function(){this.setnull()},changeSearch:function(){this.searchType?this.linkList=this.searchList:this.linkList=this.searchSite,this.setnull(),this.searchType=!this.searchType},setnull:function(){this.showUrl=null,this.iframeUrl=null,this.linkIndex=null},getFiles:function(t){if(this.isApp){var e=api.require("fs"),a=e.openSync({path:"fs://pingData/"+t.fileName,flags:"read_write"});if(a.status){var i=a.fd,s=e.readSync({fd:a.fd,offset:0,length:0});if(s.status)t.cancelList||(this.linkList=JSON.parse(s.data)),"searchfile.ping"==t.fileName&&(this.searchList=JSON.parse(s.data)),"searchsite.ping"==t.fileName&&(this.searchSite=JSON.parse(s.data)),e.closeSync({fd:i}).status}else this.commonFn.showMsg({text:"没有此文件！"})}},cancelshow:function(){this.showIfrImg=!1,this.curImgUrl="",this.imgType=""},downSImg:function(){var t=document.getElementById("drawImgs").toDataURL("image/png");this.commonFn.saveImgsToAlbum({type:"base64",hasbs64:!0,curData:t,istip:!1}),this.showIfrImg=!1,this.imgType="",this.curImgUrl=""},drawImgs:function(t){var e=this,a=document.getElementById("drawImgs").getContext("2d"),i=new Image;i.src=t,i.setAttribute("crossOrigin","Anonymous"),i.onload=function(){window.innerWidth,window.innerWidth,i.height,i.width;e.canvasStyle={width:i.width,height:i.height},setTimeout(function(){a.drawImage(i,0,0,i.width,i.height)},1e3)}},showClipboard:function(){this.jtbFn(this.clipboardData)},cancelVideo:function(){this.mediaData={isShow:!1,url:"",progress:0}},downVideo:function(){var t=this,e="";"mp4"==t.mediaData.type?e=".mp4":"mp3"==t.mediaData.type&&(e=".mp3"),api.download({url:t.mediaData.url,savePath:"fs://media/"+(new Date).getTime()+e,report:!0,cache:!0,allowResume:!0},function(e,a){1==e.state?(t.mediaData.isShow=!0,t.mediaData.progress=e.percent):0==e.state?(t.mediaData.isShow=!0,t.mediaData.progress=e.percent):alert(s()(a)),a&&alert(s()(a))})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"iframebox"},[t.iframeUrl?t._e():i("div",{staticClass:"iframes_madminSet"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.showUrl,expression:"showUrl"}],attrs:{name:"",id:"iframesInp",placeholder:"请输入网址"},domProps:{value:t.showUrl},on:{input:function(e){e.target.composing||(t.showUrl=e.target.value)}}}),t._v(" "),i("div",{staticClass:"iframesBtn"},[i("button",{staticClass:"jbbg",attrs:{type:"button"},on:{click:t.showIframe}},[t._v("确定")]),t._v(" "),i("button",{staticClass:"jbbg",attrs:{type:"button"},on:{click:t.showClipboard}},[t._v("显示剪贴板")])])]),t._v(" "),i("div",{staticClass:"pdlr16"},[!t.iframeUrl&&t.linkList?i("div",{staticClass:"creatLinkList"},[i("h4",[t._v("链接列表")]),t._v(" "),i("button",{attrs:{type:"button"},on:{click:t.changeSearch}},[t._v("切换搜索")]),t._v(" "),i("ul",t._l(t.linkList.list,function(e,a){return i("li",{class:a==t.linkIndex?"active":"",attrs:{"data-linkindex":a},on:{click:function(e){return t.getElData(e)}}},[i("p",[t._v(t._s(e.title))]),t._v(" "),i("p",[t._v(t._s(e.url))])])}),0)]):t._e()]),t._v(" "),i("button",{staticClass:"gobacks",attrs:{type:"button"},on:{click:t.gobacks}},[i("img",{attrs:{src:a("+XBy"),alt:""}})]),t._v(" "),t.iframeUrl?i("iframe",{ref:"iframeBox",style:{height:t.iframHeight},attrs:{id:"iframeBox",src:t.iframeUrl,frameborder:"0"}}):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showIfrImg,expression:"showIfrImg"}],staticClass:"showIframeImg"},[i("img",{attrs:{src:t.curImgUrl,alt:""}}),t._v(" "),i("div",{staticClass:"showIfrIbtn"},[i("button",{staticClass:"jbbg",attrs:{type:"button"},on:{click:t.cancelshow}},[t._v("取消")]),t._v(" "),i("button",{staticClass:"jbbg",attrs:{type:"button"},on:{click:t.downSImg}},[t._v("下载")])])]),t._v(" "),i("canvas",{ref:"drawImgs",attrs:{id:"drawImgs",width:t.canvasStyle.width,height:t.canvasStyle.height}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.mediaData.isShow,expression:"mediaData.isShow"}],staticClass:"showVideoBox"},[i("h4",[t._v(t._s("mp4"==t.mediaData.type?"下载视频":"")+t._s("mp3"==t.mediaData.type?"下载音频":""))]),t._v(" "),i("p",[t._v(t._s(t.mediaData.url))]),t._v(" "),i("p",[t._v(t._s(t.mediaData.progress)+"%")]),t._v(" "),i("div",{staticClass:"videoLine"},[i("span",{style:"width:"+t.mediaData.progress+"%"})]),t._v(" "),i("div",{staticClass:"showIfrIbtn"},[i("button",{staticClass:"jbbg",attrs:{type:"button"},on:{click:t.cancelVideo}},[t._v("取消")]),t._v(" "),i("button",{staticClass:"jbbg",attrs:{type:"button"},on:{click:t.downVideo}},[t._v("下载")])])])])},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(t){a("IOqR")},null,null);e.default=o.exports},IOqR:function(t,e){}});