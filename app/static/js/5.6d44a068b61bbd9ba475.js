webpackJsonp([5],{O88V:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"drawingboard",data:function(){return{}},mounted:function(){this.initDraw()},methods:{initDraw:function(){console.log(window);var t,e,i,n,o=window.devicePixelRatio,a=!1,s=document.getElementById("mycanvas"),c=s.getContext("2d");t=window.innerWidth,e=window.innerHeight;var l=document.querySelector(".main_canvas");l.style.cssText="width:winWidth;height:winHeight*0.7",i=t*o,n=e*o*.7,s.width=i,s.height=n,s.width,s.height;var d={x:0,y:0},r={x:0,y:0},v=!1;function u(t){var e=t||window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}s.onmousedown=function(t){d.x=t.pageX-void 0,d.y=t.pageY,v=!0},s.onmousemove=function(t){u(t),a?v&&(d.x=t.pageX-void 0,d.y=t.pageY,r.x=t.pageX-void 0,r.y=t.pageY,m(d.x,d.y,r.x,r.y)):v&&(r.x=t.pageX-void 0,r.y=t.pageY,m(d.x,d.y,r.x,r.y)),a=!1},s.onmouseup=function(t){u(t),v=!1,d.x=0,d.y=0,r.x=0,r.y=0},window.onmouseup=function(){v=!1},window.onmousemove=function(t){(t.pageX>s.width+void 0||t.pageX<s.width+void 0||t.pageY<0||t.pageY>s.height)&&(a=!0)},s.addEventListener("touchstart",function(t){d.x=t.touches[0].clientX*o,d.y=t.touches[0].clientY*o},!1),s.addEventListener("touchmove",function(t){r.x=t.touches[0].clientX*o,r.y=t.touches[0].clientY*o,m(d.x,d.y,r.x,r.y)},!1);var g=1;g*=o;var h="black",w=new Image;function m(t,e,i,n){c.beginPath(),c.restore(),c.save(),c.lineWidth=g,c.strokeStyle=h,c.moveTo(t,e),c.lineTo(i,n),c.stroke(),d.x=i,d.y=n,c.restore(),c.save()}function _(t,e,i,n){c.restore(),c.save(),c.beginPath(),c.drawImage(w,t,e,i,n),c.restore(),c.save()}w.src="",document.getElementById("upimgs").addEventListener("change",function(){console.log("有选择");var t,e=this.files[0];console.log(e),void 0!=window.createObjectURL?(t=window.createObjectURL(e),console.log(window.createObjectURL(e))):void 0!=window.URL?(t=window.URL.createObjectURL(e),console.log(window.URL.createObjectURL(e))):void 0!=window.webkitURL&&(t=window.webkitURL.createObjectURL(e),console.log(window.webkitURL.createObjectURL(e))),w.src=t,w.onload=function(){var t=w.width/w.height,e=(w.width,w.height,s.width/t),i=s.height*t;e>s.height?_(0,-(e-s.height)/2,s.width,e):e<s.height&&_(-(i-s.width)/2,0,i,s.height)}}),document.getElementById("color_val").addEventListener("input",function(t){h=t.target.value,console.log(t)}),document.getElementById("sib_linecx").addEventListener("input",function(t){g=t.target.value,console.log(t)}),document.getElementById("sig_clear").addEventListener("click",function(){c.beginPath(),c.clearRect(0,0,s.width,s.height),c.restore(),c.save()});var p=document.getElementById("save_sig"),y=document.querySelector(".create_imgs"),b=document.querySelector(".create_imgbox"),f=document.querySelector(".modal_bg");p.addEventListener("click",function(){var t=new Image;t.setAttribute("crossOrigin","Anonymous"),t.src=s.toDataURL("image/png"),console.log(t),t.style.cssText="width: 100%;display:block;",t.onload=function(){b.appendChild(t)},y.style.cssText="display:block;"}),f.addEventListener("click",function(){y.style.cssText="display:none;",console.log(b.children),b.removeChild(b.firstChild)})}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"drawingboard"},[i("div",{staticClass:"main_box"},[i("div",{staticClass:"main_canvas"},[i("canvas",{attrs:{id:"mycanvas"}})]),t._v(" "),i("div",{staticClass:"signature_btn"},[i("ul",{staticClass:"flexbox"},[i("li",{staticClass:"flex1"},[i("div",{staticClass:"sig_cxline"},[i("select",{attrs:{name:"",id:"sib_linecx"}},[i("option",{attrs:{value:"1"}},[t._v("1")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("2")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("3")]),t._v(" "),i("option",{attrs:{value:"4"}},[t._v("4")]),t._v(" "),i("option",{attrs:{value:"5"}},[t._v("5")])])])]),t._v(" "),i("li",{staticClass:"flex1"},[i("div",{staticClass:"sig_colors"},[i("input",{attrs:{id:"color_val",type:"color",readonly:"",placeholder:"选择颜色"}})])]),t._v(" "),i("li",{staticClass:"flex1"},[i("div",{staticClass:"sig_bgfile"},[i("input",{staticClass:"upfiles",attrs:{id:"upimgs",type:"file",accept:"image/*"}}),t._v(" "),i("button",{attrs:{type:"button"}},[t._v("上传背景")])])])])]),t._v(" "),i("div",{staticClass:"btnbox"},[i("ul",{staticClass:"flexbox"},[i("li",{staticClass:"flex1"},[i("button",{attrs:{id:"sig_clear",type:"button"}},[t._v("清空画布")])]),t._v(" "),i("li",{staticClass:"flex1"},[i("button",{attrs:{id:"save_sig",type:"button"}},[t._v("生成图片")])])])]),t._v(" "),i("div",{staticClass:"create_imgs"},[i("div",{staticClass:"modal_bg"}),t._v(" "),i("div",{staticClass:"create_imgbox"})])])])}]};var a=i("VU/8")(n,o,!1,function(t){i("ouYE")},"data-v-3854811e",null);e.default=a.exports},ouYE:function(t,e){}});
//# sourceMappingURL=5.6d44a068b61bbd9ba475.js.map